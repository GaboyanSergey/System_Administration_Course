# Системное администрирование. Конспект 1
## Глава 3: Рабочие станции 
### Основы
Обслуживание операционных систем на рабочих станциях сводится к выполнению трех основных задач: 
+ первоначальная установка системного программного обеспечения и приложений 
+ обновление системного программного обеспечения и приложений
+ настройка сетевых параметров.

__Рабочая станция__ в нашем понимании – компьютерное оборудование, выделенное для работы одного пользователя.

С обслуживанием операционных систем рабочей станции связаны три критически важных аспекта:
+ первоначальная установка системного ПО и приложений
+ обновление системного ПО и приложений
+ настройка сетевых параметров.

Если вы хотите, чтобы управление вашей сетью производилось с минимальными затратами, эти три задачи необходимо автоматизировать для любой платформы, которая используется в вашей сети. Если же в вашей сети есть лишь несколько узлов, являющихся различными платформами, создание полной автоматизации может и не требоваться.
### Установка ОС
Каждый поставщик ОС дает свое название системе автоматической установки ОС: JumpStart в Solaris, KickStart в RedHat Linux, RoboInst в SGI IRIX, Ignite‑UX в HP‑UX, служба удаленной установки (Remote Installation Service) в Microsoft Windows. Автоматизация решает огромное количество проблем (экономия денег и времени, отсутствие ошибок и прочее).
### Удостоверьтесь, что ваша автоматизированная система действительно автоматизирована
Настройка системы автоматической установки требует больших усилий. Однако в результате эти усилия окупятся и сэкономят вам больше времени, чем вы потратите на настройку. Самый важный аспект автоматизации заключается в том, что установка должна быть полностью автоматизирована. Мы считаем, что стоит потратить дополнительные усилия, чтобы впоследствии не возвращаться к машине снова и снова для подтверждения того или иного действия или перехода к следующему этапу установки. Это означает, что при подтверждении будет выбран верный вариант ответа и об этих этапах никто не забудет и не пропустит их. Кроме того, системные администраторы могут более эффективно управлять своим временем. Они смогут сконцентрироваться на следующей задаче, вместо того чтобы думать о том, не пора ли вернуться к машине, чтобы запустить следующий этап установки. Когда вы решите, что закончили автоматизацию того или иного процесса, попросите опробовать вашу систему какого-нибудь человека, незнакомого с вашей работой.
### Частично автоматизированная установка
Частичная автоматизация лучше, чем ее полное отсутствие. До тех пор, пока система установки не будет работать идеально, необходимо обеспечить какие-то временные средства для некоторых этапов. Автоматизация оставшегося 1% может занять больше времени, чем автоматизация первых 99%. Основная временная мера – документирование всего процесса, которое позволит впоследствии воспроизводить его в точности. Документирование может производиться в виде записей при создании первой системы, чтобы на различные запросы можно было давать одни и те же ответы. Можно автоматизировать различные этапы установки. Некоторые из них отлично поддаются автоматизации. Можно придумать и более изощренные временные решения. 
### Клонирование и другие методы 
__Клонирование__ жесткого диска подразумевает создание узла с точной конфигурацией ПО, которая необходима для всех развертываемых узлов. Затем жесткий диск этого узла клонируется (копируется) на все новые компьютеры. Первую машину часто называют __«золотым узлом»__. Вместо того чтобы снова и снова копировать жесткий диск, его содержимое можно скопировать на компакт-диск, ленточный накопитель или файловый сервер, которые впоследствии будут использоваться при установке. Мы предпочитаем автоматизированный процесс установки копированию диска. Можно достичь золотой середины, применяя как автоматизацию, так и клонирование.
### Стоит ли доверять установкам от поставщиков
Переустановка ОС с нуля предпочтительнее по нескольким причинам. 
+ Во-первых, прежде чем машина сможет работать в вашей сети, вам, вероятно, потребуется установить другие приложения и локализации поверх установленной поставщиком ОС. 
+ Во-вторых, поставщики вносят изменения в конфигурацию предустановленной ОС в собственных целях, никого об этом не уведомляя. 
+ Другая причина для отказа от использования предустановленной ОС – то, что время от времени ОС узлов сети приходится переустанавливать. Некоторые поставщики могут предустанавливать систему с предоставленного вами образа диска. Такая услуга не только избавляет вас от необходимости самостоятельно устанавливать системы, но и дает вам знание того, что именно было установлено. Однако на вас по-прежнему лежит обязанность обновлять мастер-образ по мере появления новых устройств и моделей. 
### Контрольные списки при установке 
Какой бы способ установки ОС вы ни использовали – ручной или полностью автоматизированный, – вы можете улучшить согласованность процесса с помощью контрольных списков. __Контрольные списки__ помогают удостовериться, что техники не пропустят ни одного этапа. Польза таких списков очевидна, если процесс установки полностью выполняется вручную. Даже если установку проводит один системный администратор, полностью уверенный в согласованности установки всех ОС («я все делаю сам»), он поймет преимущества использования контрольных списков. И конечно же, эти списки могут послужить основой для системы обучения новых системных администраторов или подготовки толкового служащего, который будет выполнять эту работу в соответствии с пунктами списка. 
### Обновление системного ПО и приложений
К сожалению, с течением времени обнаруживаются новые ошибки и новые бреши в системе безопасности, и все их необходимо исправлять. Кроме того, появляются прекрасные новые приложения, которые необходимо устанавливать. Все эти задачи относятся к области обновления программного обеспечения. Как и в случае с установкой, процесс обновления можно автоматизировать, сэкономив время и силы. Системы обновления ПО должны быть достаточно универсальными, чтобы они позволяли устанавливать новые приложения и обновлять уже имеющиеся, а также устанавливать патчи ОС.
### Процесс обновления отличается от установки  
Автоматизация обновления ПО схожа с автоматизацией первичной установки, но между ними есть и несколько существенных различий: 
+ узел сети находится в рабочем состоянии
+ узел сети находится в офисе
+ отсутствует необходимость в физическом доступе
+ узел сети уже используется
+ узел сети может не находиться в «известном состоянии»
+ узел сети может использоваться сотрудниками в процессе обновления
+ узел сети может отсутствовать
+ узел сети может иметь мультисистемную загрузку.
### Одна, несколько, много 
Вы можете снизить риск ошибок обновления, применив метод __«одна, несколько, много»__:
+ __"одна"__ - прежде всего установите патч на одну машину. Лучше всего на свою собственную – тогда у вас будет дополнительный стимул все сделать правильно
+ __"несколько"__ - далее попробуйте установить патч на несколько других машин
+ __"много"__ - протестировав свою систему и убедившись, что она не уничтожит ничей жесткий диск, начинайте постепенно переходить ко все большим и большим группам пользователей, нетерпимых к риску.
### Конфигурация сети  
Третий компонент, необходимый для сетей, объединяющих большое количество рабочих станций, – это способ автоматизации обновления сетевых параметров – тех считанных битов информации, от которой часто зависит загрузка компьютеров и их объединение в сеть. Эта информация может значительно различаться в отдельных подсетях или даже в отдельных узлах сети. А следовательно, такое обновление должно производиться иначе, чем, скажем, установка приложений, когда одно и то же приложение устанавливается на всех узлах сети с одинаковой конфигурацией. Поэтому система автоматизации обновления сетевых параметров обычно создается отдельно от остальных систем. 
### Используйте шаблоны, а не конфигурируйте каждый отдельный узел
Системы DHCP должны иметь систему шаблонов. Некоторые системы DHCP хранят отдельные параметры, присвоенные каждому отдельному узлу сети. Другие системы DHCP хранят шаблоны, описывающие, какие параметры присваиваются узлам различных классов. Преимущество шаблонов в том, что при внесении изменений на множестве узлов вам нужно будет просто изменить шаблон, что значительно лучше, чем прокручивать длинный список узлов сети, пытаясь найти те, которые требуется изменить. 
### Когда применять динамическую аренду адресов
Динамическое распределение следует использовать в случаях, когда много узлов конкурируют за малое количество IP-адресов. __Функция динамической аренды__ адресов позволяет вам указать диапазон IP-адресов, которые можно присваивать узлам сети. Эти узлы смогут при каждом подключении к сети получать новый IP-адрес. Еще одна причина для назначения статических IP-адресов – повышение удобства использования файлов журнала. Использование только статических IP-адресов не является достаточной мерой для безопасности. В некоторых сетях отключают любое динамическое назначение адресов, считая, что это предотвратит использование их сети незваными гостями. В действительности же кто-нибудь все еще может вручную конфигурировать сетевые настройки.
### Старайтесь не использовать динамический DNS - сервер с DHCP
Нас не устраивает работа DHCP-систем, которые обновляют динамические DNS серверы. Эта впечатляющее на первый взгляд свойство излишне усложняет систему и создает ненужный риск для безопасности. 
### Управление сроками аренды DHCP 
__Управление сроками аренды__ может помочь в распределении обновлений. DHCP клиентам задается определенный набор параметров, который будет использоваться в течение определенного периода времени. По истечении этого периода они должны обновить свою аренду. Изменения вносятся во время обновления. 
### Полная уверенность в завершении
Существуют автоматизированные процессы, но помимо этого есть и автоматизация процесса. Если мы абсолютно уверены в процессе, мы избавлены от необходимости беспокоиться об ошибках. И поэтому мы начинаем искать новые способы применения этого же процесса. 
### Заключение 3 главы
Если пользователи будут иметь дело со стандартной конфигурацией, вам необходимо вовлечь их в процесс составления спецификаций и разработки. В идеале пользователи должны принимать участие в процессе разработки с самого начала. Назначенные представители или заинтересованные руководители могли бы выбирать приложения, которые будут включены в конфигурацию. Наличие нескольких стандартных конфигураций может быть прекрасно или ужасно, и именно системный администратор определяет, какой эпитет лучше применим в его случае. Чем больше стандартных конфигураций используется в корпоративной сети, тем труднее все их обслуживать. 
## Глава 4: Серверы
### Основы
В отличие от рабочих станций, предназначенных для одного пользователя, от сервера зависит множество пользователей. Следовательно, главным приоритетом для них становится надежность и бесперебойная работа. Прилагая усилия для повышения надежности сервера, мы ищем возможности, которые позволят сократить время восстановления, предоставить лучшее рабочее окружение и уделять особое внимание процессу конфигурирования. К серверу могут подключаться сотни, тысячи или даже миллионы пользователей. Все усилия по повышению производительности или надежности наталкиваются на барьер огромного количества пользователей.

Оборудование, продаваемое как сервер, качественно отличается от оборудования, приобретаемого для индивидуальной рабочей станции. У серверного оборудования другие возможности, а при его разработке учитывается другая экономическая модель. При установке и поддержке серверов используются особые процедуры. Как правило, серверы поставляются с контрактом на обслуживание, системами резервного копирования, операционной системой и возможностью удаленного доступа. Кроме того, серверы размещают в вычислительных центрах с контролируемым микроклиматом и с ограниченным доступом к серверному оборудованию.
### Покупайте для серверов серверное оборудование  
Серверное оборудование обычно стоит дорого, но дополнительные возможности оправдывают вложения. Вот некоторые из этих возможностей: 
+ расширяемость 
+ большая производительность центральных процессоров
+ высокопроизводительные системы обмена информацией (ввода-вывода)
+ возможности модернизации
+ возможность монтирования в стойку 
+ не требуется доступ с боковых сторон
+ дополнения для повышенной надежности
+ контракт на обслуживание
+ альтернативные варианты управления. 
### Выбирайте поставщиков, известных надежностью продукции 
Очень важно выбирать поставщиков, продукция которых известна своей надежностью. Некоторые поставщики имеют многолетний опыт разработки серверов. Более опытные поставщики обеспечивают функции, перечисленные выше, а также другие дополнительные возможности, востребованность которых можно выяснить, только имея многолетний опыт на рынке. Полезно узнать у других системных администраторов, с какими поставщиками они работают, а каких стараются избегать. 
### Реальные расходы на серверное оборудование  
Чтобы иметь представление о дополнительных расходах на серверы, вы должны знать, из чего складывается цена компьютера. Неверно считать, что серверы дороже настольных компьютеров, так как это сравнение объектов разного рода. Понимание этого различия моделей ценообразования помогает в обсуждении, когда требуется обосновать кажущуюся дороговизну серверного оборудования. Когда сервер в состоянии обслуживать миллионы транзакций в день или распределять мощность процессора между десятками пользователей, эти расходы оправданы. Кроме того, простой сервера обходится значительно дороже простоя настольного компьютера. Дополнительное оборудование и компоненты с возможностью «горячей» замены на сервере легко окупаются за счет минимизации остановок в работе. Более весомый аргумент против решения о приобретении дорогого сервера – то, что его производительность выше, чем это требуется для службы. 
### Контракты на обслуживание и запасные компоненты  
Вот несколько разумных сценариев, которые помогут вам при выборе подходящего __контракта на обслуживание__: 
+ не критически важный сервер 
+ большая группа идентичных серверов 
+ постепенная модернизация 
+ важные узлы
+ большое количество моделей от одного поставщика
+ критически важный узел. 
### Обеспечение целостности данных 
На серверах хранятся критически важные данные и уникальные конфигурации, которые должны быть защищены. Клиентские рабочие станции, как правило, серийные и с однотипными конфигурациями, а их данные обычно хранятся на серверах, что снимает необходимость в резервном копировании. Если откажет диск рабочей станции, ее конфигурация должна быть идентичной многочисленным аналогичным машинам и не модифицированной по отношению к исходному состоянию, а следовательно, она может быть восстановлена с помощью автоматизированной процедуры установки. Это в теории. Однако люди всегда сохраняют какие-то данные на своих локальных машинах, локально устанавливаются программы, а операционная система сохраняет локально некоторые конфигурационные данные.
### Размещение серверов в вычислительном центре  
Серверы должны устанавливаться в условиях с надежными энергоснабжением, противопожарной защитой, сетью, охлаждением и физической безопасностью. Лучше всего зарезервировать физическое место для размещения сервера при его приобретении. Если пометить места в соответствующих стойках распечатанными метками, это предотвратит повторное резервирование места. Для разметки мест энергоснабжения и охлаждения потребуется сверяться по списку или таблице. После сборки оборудование лучше устанавливать в стойку непосредственно перед установкой ОС и другого программного обеспечения. 
### Конфигурация клиент-серверной ОС  
Серверы необязательно должны работать под управлением тех же ОС, что и их клиенты. Серверы могут быть совершенно другими, в точности такими же, или с той же базовой ОС, но с другой конфигурацией для иного предназначения. Для разных случаев подходят различные варианты. 
### Обеспечьте удаленный доступ через консоль 
Переключатель __КВМ__ – устройство, позволяющее нескольким машинам использовать одну клавиатуру, видеоэкран и мышь (КВМ). Предшественник переключателя КВМ был предназначен для устройств с последовательным портом. 

В настоящее время последовательные консольные концентраторы бывают двух видов: __самодельные__ и __специализированные__.
+ Самодельное решение подразумевает следующее: вы берете машину с множеством последовательных портов и программное обеспечение (бесплатное, такое как ConServer1, или коммерческий аналог) и сами создаете систему. 
+ Специализированное решение – готовая система от поставщика, которая обычно быстрее поддается настройке и оснащена программным обеспечением в виде прошивки или на твердотельном накопителе на флэш-памяти.

Последовательные консоли и переключатели КВМ дают следующее преимущество: они позволяют вам управлять системной консолью,если сеть не работает или если система в неисправном состоянии. Некоторые поставщики предоставляют карты расширения, которые позволяют удаленно управлять машиной. Эта возможность зачастую является основным отличием между серверами и простыми машинами этих поставщиков. Продукция сторонних компаний также может предоставлять эту возможность. Сетевые устройства, такие как маршрутизаторы и коммутаторы, оснащены только последовательными консолями. Таким образом, может быть полезно помимо системы КВМ иметь доступ и к последовательной консоли. При приобретении серверного оборудования вам следует обратить особое внимание на то, какой тип удаленного доступа к консоли будет доступен и для решения каких задач может потребоваться такой доступ. 

Однако у удаленного доступа есть очевидные ограничения из-за того, что отдельные задачи (включение и выключение питания, загрузка сменных носителей, замена неисправного оборудования) требуют присутствия человека возле машины. При использовании удаленной консоли придется продумать вопросы безопасности. Часто стратегии безопасности узла базируются на размещении консоли за запертыми дверями. Удаленный доступ разрушает эти стратегии. Следовательно, для консольных систем требуются продуманные системы аутентификации и конфиденциальности. При покупке сервера следует убедиться в наличии возможности удаленного консольного доступа. Если поставщик не удовлетворяет ваши потребности, стоит поискать оборудование где-то еще.
### Зеркалирование загрузочных дисков  
__Зеркалирование__ предполагает определенные компромиссы в отношении производительности. Операции чтения производятся быстрее, так как чтение идет параллельно с двух дисков. Без зеркального копирования сбой жесткого диска означает простой в работе. Благодаря зеркальному копированию сбой жесткого диска является событием, которое можно не только спокойно пережить, но и контролировать. Если неисправный диск можно заменить во время работы системы, сбой в работе одного компонента не приведет к простою. Если неисправные диски можно заменять только при отключенной системе, перерыв в работе можно запланировать в соответствии с потребностями компании. Благодаря этому простои в работе можем контролировать мы, не позволяя им контролировать нас. 
### Одноцелевые серверы 
__Одноцелевое устройство__ – устройство, созданное для выполнения одной конкретной задачи. Тостеры делают тосты. Миксеры смешивают. Те же действия можно выполнять и с помощью универсальных устройств, но есть определенные преимущества при использовании устройств, предназначенных для качественного выполнения одной конкретной задачи. В компьютерном мире также есть одноцелевые устройства: файловые серверы, веб-серверы, серверы электронной почты, DNS-сервера и т. д. Преимущество одноцелевых устройств – наличие возможностей, которых больше нигде нет.
### Резервные блоки питания 
По предрасположенности к сбоям среди всех системных компонентов на втором месте после жестких дисков находятся блоки питания. Поэтому в идеале серверы должны быть обеспечены резервными блоками питания. Наличие резервных блоков питания не означает, что просто подключено два таких устройства. Это означает, что система сохраняет работоспособность, если один из блоков питания не функционирует: избыточность n + 1. В некоторых случаях системе при полной нагрузке требуется два блока питания для обеспечения достаточной мощности. В этом случае избыточность обеспечивается тремя блоками питания. Это важный вопрос, который необходимо выяснить с поставщиками при приобретении серверов и сетевого оборудования. 
### Полная избыточность, или n + 1
Как уже упоминалось выше, избыточность n + 1 относится к системам, которые спроектированы таким образом, что система продолжает функционировать даже после сбоя одного из компонентов. Напротив, при полной избыточности два полных набора оборудования объединены в отказоустойчивую конфигурацию. Другие системы с полной избыточностью используют распределение нагрузки.  
### Компоненты, поддерживающие «горячую» замену 
Резервные компоненты должны поддерживать «горячую» замену. __«Горячая» замена__ подразумевает возможность отключить и заменить компонент во время работы системы. Как правило, компоненты следует заменять только при отключенной системе. Возможность «горячей» замены аналогична смене покрышки в тот момент, когда автомобиль мчится по шоссе. Очень удобно, когда не приходится останавливаться, чтобы устранить обычную проблему. Если поставщик заявляет о возможности «горячей» замены компонентов, всегда задавайте два вопроса: «Какие компоненты не имеют возможности «горячей» замены? Каким образом и на какой период прерывается работа при «горячей» замене компонентов?» 
### Альтернатива
Мы рекомендовали не экономить на серверном оборудовании, так как повышение быстродействия и надежности стоит дополнительных затрат. Однако все чаще мы сталкиваемся со встречным доводом, в соответствии с которым лучше использовать несколько недорогих одинаковых серверов, которые будут давать сбои чаще. Если вы умеете неплохо справляться со сбоями, такая стратегия будет для вас более выгодной. 
### Заключение 4 главы
Приобретая серверы, мы принимаем различные решения, так как от серверов зависит деятельность множества пользователей, в то время как клиентская рабочая станция предназначена только для одного пользователя. В отличие от рынка настольных компьютеров, на рынке серверного оборудования важнейшее значение имеют иные экономические факторы. Знание этих факторов помогает принимать более грамотные решения при покупке. Также была рассмотрена правильная эксплуатация серверов.  

